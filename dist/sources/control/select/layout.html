<cg-greatselect ref="gs" :disabled="propBoolean('disabled')" :area="propBoolean('editable') ? (propBoolean('search') ? 'text' : 'arrow') : 'all'" :plain="propBoolean('plain')" :virtual="virtual" pop="custom" :padding="!labelMode ? '0' : padding" :min-width="propNumber('minWidth')" :style="{'--select-padding':padding==='0'?'0':`var(--g-padding${padding==='m'?'':('-'+padding)})`}" @pop="onPop">
    <div v-if="labelMode" class="labelmode" :style="{'color':listItem[0]?listItem[0].color:undefined}">{{label[0] || '　'}}</div>
    <template v-else>
        <div v-if="propBoolean('multi')" ref="tags" class="tags" :class="[propBoolean('editable') && 'editable']" v-show="!propBoolean('editable') || label.length" @wheel="tagsWheel">
            <div v-for="item, index of label" class="tag" @mousedown="tagdown" @touchstart="tagdown">
                <div class="label" @click="tagClick(index)">{{item}}</div>
                <div class="close" @click="removeTag(index)">
                    <cg-icon name="close" size="m"></cg-icon>
                </div>
            </div>
            <div v-if="!label.length" class="tag placeholder">　</div>
        </div>
        <div v-if="propBoolean('leftlabel')&&propBoolean('editable')&&!propBoolean('multi')&&label.length&&(label[0]!==value[0])" class="leftlabel">{{label[0]}}</div>
        <cg-text v-if="propBoolean('editable')" :class="[propBoolean('leftlabel')&&!propBoolean('multi')&&label.length&&(label[0]!==value[0])&&'showleftlabel']" :modelValue="inputValue" @update:modelValue="updateInputValue" :disabled="disabled" :placeholder="placeholder" @keydown="keydown" @blur="blur" plain :padding="padding"></cg-text>
    </template>
    <template v-slot:pop>
        <div class="pop">
            <cg-text v-if="propBoolean('search') && !propBoolean('editable')" :modelValue="searchValue" @update:modelValue="updateSearchValue" :placeholder="l('search')" @keydown="textKeyDown" plain></cg-text>
            <cg-list ref="list" @label="listLabel=$event" @item="listItem=$event" v-model="listValue" :data="dataComp" :must="isMust" :multi="listMulti" :ctrl="false" :tree="tree" :treeDefault="treeDefault" :async="async" :icon="icon" :iconDefault="iconDefault" @itemclicked="listItemClicked" @load="onLoad" @add="onAdd" @remove="onRemove" @change="onChange" :map="map" :disabledList="disabledList" :unavailableList="unavailableList" plain>
                <template v-if="slots['row']" v-slot:row="data">
                    <slot name="row" :row="data.row" :index="data.index"></slot>
                </template>
            </cg-list>
            <div class="loading" :class="[searching>0&&'show']">
                <cg-loading></cg-loading>
            </div>
        </div>
    </template>
</cg-greatselect>