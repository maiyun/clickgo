var emodule=function(t){"use strict";function e(t){var e=Object.create(null);return t&&Object.keys(t).forEach(function(s){if("default"!==s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}}),e.default=t,Object.freeze(e)}var s=e(t);class i extends s.control.AbstractControl{get filename(){return"/code.js"}constructor(){super(...arguments),this.emits={gesture:null,beforeselect:null,afterselect:null,select:null,clientwidth:null,clientheight:null,scrollwidth:null,scrollheight:null,"update:scrollLeft":null,"update:scrollTop":null},this.props={direction:"h",selection:!1,gesture:[],scrollLeft:0,scrollTop:0,data:[],sizes:{}},this.showPos={start:0,end:9},this.selectPos={start:0,end:0},this.pos=[],this.size=0,this.length=0,this.scrollLeftData=0,this.scrollTopData=0,this.clientWidth=0,this.clientHeight=0,this.padding={top:0,right:0,bottom:0,left:0}}get dataFormat(){if("number"!=typeof this.props.data)return this.props.data;const t=[];for(let e=1;e<=this.props.data;++e)t.push(e);return t}get scrollComp(){return"v"===this.props.direction?this.scrollTopData:this.scrollLeftData}get client(){return"v"===this.props.direction?this.clientHeight:this.clientWidth}get itemStyle(){return t=>({left:("v"===this.props.direction?this.padding.left:this.pos[t]?this.pos[t].start:"0")+"px",top:("v"===this.props.direction?this.pos[t]?this.pos[t].start:"0":this.padding.top)+"px","min-width":"v"===this.props.direction?`calc(100% - ${this.padding.left+this.padding.right}px)`:void 0,"min-height":"v"===this.props.direction?void 0:`calc(100% - ${this.padding.top+this.padding.bottom}px)`,display:"v"===this.props.direction?void 0:"flex"})}getPos(t){return this.pos[t]}inArea(t,e){const s=this.pos[t];return!!s&&(s.end>e.start&&s.start<e.end)}getNewPos(t,e){const s={start:-1,end:-1,empty:!1};if(this.inArea(t.start,e)){s.start=t.start;for(let i=t.start-1;i>=0&&this.inArea(i,e);--i)s.start=i}else{let i=this.pos[t.start];if(!i){if(0===t.start||!this.pos[0])return{start:0,end:9,empty:!0};t.start=0,s.start=0,i=this.pos[0]}if(e.start>i.start){for(let i=t.start+1;i<this.dataFormat.length;++i)if(this.inArea(i,e)){s.start=i;break}if(-1===s.start)return{start:0,end:9,empty:!0}}else{let i=!1;for(let r=t.start-1;r>=0;--r)if(this.inArea(r,e))i||(i=!0),s.start=r,-1===s.end&&(s.end=r);else if(i)break}}if(s.end>-1)return s;this.pos[t.end]||(t.end=s.start);if(this.inArea(t.end,e)){s.end=t.end;for(let i=t.end+1;i<this.dataFormat.length&&this.inArea(i,e);++i)s.end=i}else{const i=this.pos[t.end];if(e.end<i.end){for(let i=t.end-1;i>=0;--i)if(this.inArea(i,e)){s.end=i;break}}else{let i=!1;for(let r=t.end+1;r<this.dataFormat.length;++r)if(this.inArea(r,e))i||(i=!0),s.end=r;else if(i)break}}return s}refreshSize(t=!1){let e=!1;const s=this.element.querySelector('[data-cg-size="same"]');if(s){const t="h"===this.props.direction?s.offsetWidth:s.offsetHeight;t!==this.size&&(this.size=t,e=!0)}if(!t&&!e&&this.pos.length===this.dataFormat.length)return;this.pos=[],this.length=0;const i="h"===this.props.direction?this.padding.left:this.padding.top;for(let t=0;t<this.dataFormat.length;++t){const e=this.props.sizes[t]??this.size;this.pos.push({start:this.length+i,end:this.length+e+i}),this.length+=e}this.reShow()}reShow(){const t=this.getNewPos(this.showPos,{start:this.scrollComp-20,end:this.scrollComp+this.client+20});this.showPos.start=t.start,this.showPos.end=t.end,this.nextTick().then(()=>{let t=this.element.querySelector("[data-cg-roindex]");if(t){if("same"===t.dataset.cgSize)return;s.dom.unwatchSize(t)}t=this.element.querySelector('[data-cg-size="same"]'),t&&s.dom.watchSize(this,t,()=>{"same"===t.dataset.cgSize&&this.refreshSize()})})}updateScrollOffset(t,e){"left"===e?(this.emit("update:scrollLeft",t),this.scrollLeftData=t,"h"===this.props.direction&&this.reShow()):(this.emit("update:scrollTop",t),this.scrollTopData=t,"v"===this.props.direction&&this.reShow())}clientwidth(t){this.clientWidth=t,"h"===this.props.direction&&this.reShow(),this.emit("clientwidth",t)}clientheight(t){this.clientHeight=t,"v"===this.props.direction&&this.reShow(),this.emit("clientheight",t)}onSelect(t){const e="v"===this.props.direction?t.y:t.x,s="v"===this.props.direction?t.height:t.width,i=this.getNewPos(this.selectPos,{start:e,end:e+s});this.selectPos.start=i.start,this.selectPos.end=i.end,t.start=i.start,t.end=i.end,t.empty=i.empty,this.emit("select",t)}onMounted(){this.watch("dataFormat",async()=>{await this.nextTick(),this.refreshSize()},{deep:!0}),this.watch("direction",async()=>{await this.nextTick(),this.refreshSize()}),this.watch("scrollLeft",()=>{"h"===this.props.direction&&this.scrollLeftData!==this.propInt("scrollLeft")&&(this.scrollLeftData=this.propInt("scrollLeft"),this.reShow())}),this.watch("scrollTop",()=>{"v"===this.props.direction&&this.scrollTopData!==this.propInt("scrollTop")&&(this.scrollTopData=this.propInt("scrollTop"),this.reShow())}),this.watch("sizes",()=>{this.refreshSize(!0)}),s.dom.watchStyle(this.element,["padding-top","padding-right","padding-bottom","padding-left","font"],(t,e)=>{switch(t){case"padding-top":this.padding.top=parseInt(e);break;case"padding-right":this.padding.right=parseInt(e);break;case"padding-bottom":this.padding.bottom=parseInt(e);break;case"padding-left":this.padding.left=parseInt(e)}this.refreshSize()},!0)}}return i}(clickgo.modules.clickgo);