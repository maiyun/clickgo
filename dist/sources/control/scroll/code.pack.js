var emodule=function(t){"use strict";function i(t){var i=Object.create(null);return t&&Object.keys(t).forEach(function(s){if("default"!==s){var e=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(i,s,e.get?e:{enumerable:!0,get:function(){return t[s]}})}}),i.default=t,Object.freeze(i)}var s=i(t);class e extends s.control.AbstractControl{get filename(){return"/code.js"}constructor(){super(...arguments),this.emits={show:null,roll:null,"update:offset":null},this.props={disabled:!1,float:!1,direction:"v",length:1e3,client:100,offset:0},this.offsetData=0,this.hideTimer=0,this.tran=0,this.isShow=!0,this.isEnter=!1,this.width=0,this.height=0,this.barPx=0}get blockPx(){const t=this.propInt("client")/this.propInt("length")*this.barPx;return t<5?5:t}get maxOffset(){return this.propInt("length")>this.propInt("client")?this.propInt("length")-this.propInt("client"):0}get offsetRatio(){return this.maxOffset?this.offsetData/this.maxOffset:0}get outBlockPx(){return this.barPx-this.blockPx}get offsetPx(){return this.outBlockPx*this.offsetRatio}wrapTouch(t){s.dom.bindDown(t,{down:()=>{this.isEnter=!0,this.propBoolean("float")&&(this.isShow=!0,this.hideTimer&&(s.task.removeTimer(this,this.hideTimer),this.hideTimer=0))},up:()=>{this.isEnter=!1,this.propBoolean("float")&&(this.hideTimer=s.task.sleep(this,()=>{this.isShow=!1},800))}})}controlDown(t,i){this.props.client>=this.props.length||s.dom.bindDown(t,{down:()=>{this.tran=s.task.onFrame(this,()=>{"start"===i?this.offsetData-10<0?0!==this.offsetData&&(this.offsetData=0,this.emit("update:offset",this.offsetData),this.emit("roll")):(this.offsetData-=10,this.emit("update:offset",this.offsetData),this.emit("roll")):this.offsetData+10>this.maxOffset?this.offsetData!==this.maxOffset&&(this.offsetData=this.maxOffset,this.emit("update:offset",this.offsetData),this.emit("roll")):(this.offsetData+=10,this.emit("update:offset",this.offsetData),this.emit("roll"))})},up:()=>{s.task.offFrame(this,this.tran),this.tran=0}})}down(t){s.dom.hasTouchButMouse(t)||s.dom.bindMove(t,{areaObject:this.refs.bar,object:this.refs.block,move:(t,i)=>{if("v"===this.props.direction&&i.inBorder.top||"h"===this.props.direction&&i.inBorder.left)this.offsetData=0;else if("v"===this.props.direction&&i.inBorder.bottom||"h"===this.props.direction&&i.inBorder.right)this.offsetData=this.maxOffset;else{const t=this.offsetPx+("v"===this.props.direction?i.oy:i.ox),s=this.outBlockPx>0?t/this.outBlockPx:0;this.offsetData=Math.round(s*this.maxOffset)}this.emit("update:offset",this.offsetData),this.emit("roll")}})}barDown(t){if(s.dom.hasTouchButMouse(t))return;if(t.currentTarget!==t.target)return;const i=this.refs.bar.getBoundingClientRect(),e="v"===this.props.direction?i.top:i.left;let h="v"===this.props.direction?t instanceof MouseEvent?t.clientY:t.touches[0].clientY:t instanceof MouseEvent?t.clientX:t.touches[0].clientX;h-=e;let o=h-this.blockPx/2;o<0&&(o=0),o+this.blockPx>this.barPx&&(o=this.barPx-this.blockPx);const r=this.outBlockPx>0?o/this.outBlockPx:0;this.offsetData=Math.round(r*this.maxOffset),this.emit("update:offset",this.offsetData),this.emit("roll"),this.down(t)}enter(t){s.dom.hasTouchButMouse(t)||(this.isEnter=!0,this.propBoolean("float")&&(this.isShow=!0,this.hideTimer&&(s.task.removeTimer(this,this.hideTimer),this.hideTimer=0)))}leave(t){s.dom.hasTouchButMouse(t)||(this.isEnter=!1,this.propBoolean("float")&&(this.hideTimer=s.task.sleep(this,()=>{this.isShow=!1},800)))}onMounted(){const t=()=>{this.offsetData<=this.maxOffset||(this.offsetData=this.maxOffset,this.emit("update:offset",this.offsetData),this.emit("roll"))};this.watch("length",t),this.watch("client",t),this.watch("offset",()=>{this.offsetData!==this.propInt("offset")&&(this.offsetData=this.propInt("offset"),this.propBoolean("float")&&!this.isEnter&&(this.hideTimer&&s.task.removeTimer(this,this.hideTimer),this.isShow=!0,this.hideTimer=s.task.sleep(this,()=>{this.isShow=!1},800)))},{immediate:!0}),this.watch("float",()=>{this.propBoolean("float")?this.hideTimer=s.task.sleep(this,()=>{this.isShow=!1},800):(this.isShow=!0,this.hideTimer&&(s.task.removeTimer(this,this.hideTimer),this.hideTimer=0))},{immediate:!0}),this.watch("isShow",()=>{this.emit("show",this.isShow)}),s.dom.watchSize(this,this.refs.bar,()=>{const t=this.refs.bar.getBoundingClientRect();this.barPx="v"===this.props.direction?t.height:t.width;const i=this.element.getBoundingClientRect();this.width=i.width,this.height=i.height},!0)}onUnmounted(){this.hideTimer&&s.task.offFrame(this,this.hideTimer)}}return e}(clickgo.modules.clickgo);