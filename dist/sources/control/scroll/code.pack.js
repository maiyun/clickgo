var emodule=function(t){"use strict";function i(t){var i=Object.create(null);return t&&Object.keys(t).forEach(function(e){if("default"!==e){var s=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(i,e,s.get?s:{enumerable:!0,get:function(){return t[e]}})}}),i.default=t,Object.freeze(i)}var e=i(t);class s extends e.control.AbstractControl{get filename(){return"/code.js"}emits={show:null,roll:null,"update:offset":null};props={disabled:!1,float:!1,direction:"v",length:void 0,client:void 0,offset:0};offsetData=0;hideTimer=0;tran=0;isShow=!0;isEnter=!1;width=0;height=0;lengthData=0;clientData=0;_lengthEl=null;_clientEl=null;barPx=0;get blockPx(){const t=this.clientData/this.lengthData*this.barPx;return t<5?5:t}get maxOffset(){return this.lengthData>this.clientData?this.lengthData-this.clientData:0}get offsetRatio(){return this.maxOffset?this.offsetData/this.maxOffset:0}get outBlockPx(){return this.barPx-this.blockPx}get offsetPx(){return this.outBlockPx*this.offsetRatio}checkOffset(){this.offsetData<=this.maxOffset||(this.offsetData=this.maxOffset,this.emit("update:offset",this.offsetData),this.emit("roll"))}_initLength(){if(this._lengthEl&&(e.dom.unwatchSize(this._lengthEl),this._lengthEl=null),void 0===this.props.length)return this.lengthData=1e3,void this.checkOffset();"string"==typeof this.props.length||"number"==typeof this.props.length?(this.lengthData=this.propInt("length"),this.checkOffset()):(this._lengthEl=this.props.length.element?this.props.length.element:this.props.length,e.dom.watchSize(this,this._lengthEl,()=>{const t=this._lengthEl.getBoundingClientRect();this.lengthData="v"===this.props.direction?t.height:t.width,this.checkOffset()},!0))}_initClient(){if(this._clientEl&&(e.dom.unwatchSize(this._clientEl),this._clientEl=null),void 0===this.props.client)return this.clientData=100,void this.checkOffset();"string"==typeof this.props.client||"number"==typeof this.props.client?(this.clientData=this.propInt("client"),this.checkOffset()):(this._clientEl=this.props.client.element?this.props.client.element:this.props.client,e.dom.watchSize(this,this._clientEl,()=>{const t=this._clientEl.getBoundingClientRect();this.clientData="v"===this.props.direction?t.height:t.width,this.checkOffset()},!0))}controlDown(t,i){this.clientData>=this.lengthData||e.modules.pointer.down(t,{down:()=>{this.tran=e.task.onFrame(this,()=>{"start"===i?this.offsetData-10<0?0!==this.offsetData&&(this.offsetData=0,this.emit("update:offset",this.offsetData),this.emit("roll")):(this.offsetData-=10,this.emit("update:offset",this.offsetData),this.emit("roll")):this.offsetData+10>this.maxOffset?this.offsetData!==this.maxOffset&&(this.offsetData=this.maxOffset,this.emit("update:offset",this.offsetData),this.emit("roll")):(this.offsetData+=10,this.emit("update:offset",this.offsetData),this.emit("roll"))})},up:()=>{e.task.offFrame(this,this.tran),this.tran=0}})}down(t){e.modules.pointer.move(t,{areaObject:this.refs.bar,object:this.refs.block,move:(t,i)=>{if("v"===this.props.direction&&i.inBorder.top||"h"===this.props.direction&&i.inBorder.left)this.offsetData=0;else if("v"===this.props.direction&&i.inBorder.bottom||"h"===this.props.direction&&i.inBorder.right)this.offsetData=this.maxOffset;else{const t=this.offsetPx+("v"===this.props.direction?i.oy:i.ox),e=this.outBlockPx>0?t/this.outBlockPx:0;this.offsetData=Math.round(e*this.maxOffset)}this.emit("update:offset",this.offsetData),this.emit("roll")}})}barDown(t){if(t.currentTarget!==t.target)return;const i=this.refs.bar.getBoundingClientRect(),e="v"===this.props.direction?i.top:i.left;let s="v"===this.props.direction?t.clientY:t.clientX;s-=e;let h=s-this.blockPx/2;h<0&&(h=0),h+this.blockPx>this.barPx&&(h=this.barPx-this.blockPx);const o=this.outBlockPx>0?h/this.outBlockPx:0;this.offsetData=Math.round(o*this.maxOffset),this.emit("update:offset",this.offsetData),this.emit("roll"),this.down(t)}enter(t){e.modules.pointer.hover(t,{enter:()=>{this.isEnter=!0,this.propBoolean("float")&&(this.isShow=!0,this.hideTimer&&(e.task.removeTimer(this,this.hideTimer),this.hideTimer=0))},leave:()=>{this.isEnter=!1,this.propBoolean("float")&&(this.hideTimer=e.task.sleep(this,()=>{this.isShow=!1},800))}})}onMounted(){this.watch("length",()=>{this._initLength()},{immediate:!0}),this.watch("client",()=>{this._initClient()},{immediate:!0}),this.watch("direction",()=>{this._initLength(),this._initClient()}),this.watch("offset",()=>{this.offsetData!==this.propInt("offset")&&(this.offsetData=this.propInt("offset"),this.propBoolean("float")&&!this.isEnter&&(this.hideTimer&&e.task.removeTimer(this,this.hideTimer),this.isShow=!0,this.hideTimer=e.task.sleep(this,()=>{this.isShow=!1},800)))},{immediate:!0}),this.watch("float",()=>{this.propBoolean("float")?this.hideTimer=e.task.sleep(this,()=>{this.isShow=!1},800):(this.isShow=!0,this.hideTimer&&(e.task.removeTimer(this,this.hideTimer),this.hideTimer=0))},{immediate:!0}),this.watch("isShow",()=>{this.emit("show",this.isShow)}),e.dom.watchSize(this,this.refs.bar,()=>{const t=this.refs.bar.getBoundingClientRect();this.barPx="v"===this.props.direction?t.height:t.width;const i=this.element.getBoundingClientRect();this.width=i.width,this.height=i.height},!0)}onUnmounted(){this.hideTimer&&e.task.removeTimer(this,this.hideTimer),this.tran&&e.task.offFrame(this,this.tran),this._lengthEl&&e.dom.unwatchSize(this._lengthEl),this._clientEl&&e.dom.unwatchSize(this._clientEl)}}return s}(clickgo.modules.clickgo);