var emodule=function(e){"use strict";function t(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(s){if("default"!==s){var r=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return e[s]}})}}),t.default=e,Object.freeze(t)}var s=t(e);class r extends s.control.AbstractControl{get filename(){return"/code.js"}constructor(){super(...arguments),this.props={direction:"h",bg:"dot",gutter:"",alignH:void 0,alignV:void 0},this.scaleS=1,this.scaleX=0,this.scaleY=0,this.lines=[],this.refreshLineTimer=0}addLine(e){const t=this.lines.push(e)-1;return e.start.obj instanceof HTMLElement||(e.start.obj=e.start.obj.element),e.end.obj instanceof HTMLElement||(e.end.obj=e.end.obj.element),s.dom.watchSize(this,e.start.obj,()=>{}),s.dom.watchSize(this,e.end.obj,()=>{this.refreshLineTimer||(this.refreshLineTimer=window.setTimeout(()=>{this.refreshLines(),this.refreshLineTimer=0},100))}),this.refreshLines(),t}removeLine(e){this.lines.splice(e,1),this.refreshLines()}removeLineByName(e){const t=this.lines.findIndex(t=>t.name===e);return-1!==t&&(this.lines.splice(t,1),this.refreshLines(),!0)}refreshLines(){const e=/scale\(([\d.]+)\)/.exec(this.refs.content.style.transform),t=e?parseFloat(e[1]):1;for(const e of this.lines){const r=s.dom.getRectPoint(e.start.obj,this.refs.content,e.start.pos),i=s.dom.getRectPoint(e.end.obj,this.refs.content,e.end.pos);r.x/=t,r.y/=t,i.x/=t,i.y/=t;const n=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)),a=Math.min(.5*n,150);let o=r.x,c=r.y,h=i.x,l=i.y;switch(e.start.pos){case"lt":o=r.x-.7*a,c=r.y-.7*a;break;case"t":c=r.y-a;break;case"tr":o=r.x+.7*a,c=r.y-.7*a;break;case"r":o=r.x+a;break;case"rb":o=r.x+.7*a,c=r.y+.7*a;break;case"b":c=r.y+a;break;case"bl":o=r.x-.7*a,c=r.y+.7*a;break;case"l":o=r.x-a}switch(e.end.pos){case"lt":h=i.x-.7*a,l=i.y-.7*a;break;case"t":l=i.y-a;break;case"tr":h=i.x+.7*a,l=i.y-.7*a;break;case"r":h=i.x+a;break;case"rb":h=i.x+.7*a,l=i.y+.7*a;break;case"b":l=i.y+a;break;case"bl":h=i.x-.7*a,l=i.y+.7*a;break;case"l":h=i.x-a}e.path=`M ${r.x} ${r.y} \n                             C ${o} ${c}, \n                               ${h} ${l}, \n                               ${i.x} ${i.y}`,e.stroke??="solid",e.hue??="255"}}refresh(){this.scaleS=1,this.scaleX=(this.element.offsetWidth-this.refs.content.offsetWidth)/2,this.scaleY=(this.element.offsetHeight-this.refs.content.offsetHeight)/2}scale(e){s.dom.bindScale(e,(e,t,s)=>{e.preventDefault(),this.scaleX+=s.x,this.scaleY+=s.y,this.scaleS*=t,this.scaleS>5?this.scaleS=5:this.scaleS<.3&&(this.scaleS=.3)})}async onMounted(){await s.tool.sleep(34),this.refresh(),await s.tool.sleep(300),this.refresh()}}return r}(clickgo.modules.clickgo);