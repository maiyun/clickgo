var emodule=function(t){"use strict";function e(t){var e=Object.create(null);return t&&Object.keys(t).forEach(function(s){if("default"!==s){var l=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:function(){return t[s]}})}}),e.default=t,Object.freeze(e)}var s=e(t);class l extends s.control.AbstractControl{get filename(){return"/code.js"}emits={changed:null,ok:null,"update:modelValue":null};props={modelValue:"",mode:"hsl",ok:!1};hsl={h:0,s:0,l:100,a:1};color="";value="";localeData={en:{clear:"Clear",ok:"OK"},sc:{clear:"清除",ok:"确定"},tc:{clear:"清除",ok:"確定"},ja:{clear:"クリア",ok:"OK"},ko:{clear:"지우기",ok:"확인"},th:{clear:"ล้าง",ok:"ตกลง"},es:{clear:"Claro",ok:"Aceptar"},de:{clear:"Löschen",ok:"OK"},fr:{clear:"Effacer",ok:"Valider"},pt:{clear:"Limpar",ok:"OK"},ru:{clear:"Очистить",ok:"ОК"},vi:{clear:"Xóa",ok:"OK"}};leftTop=0;leftLeft=0;refreshLeftPosition(t,e,s,l){let h=(t instanceof MouseEvent?t.clientY:t.touches[0].clientY)-e.top;h<0?h=0:h>s&&(h=s);const o=h/s;this.leftTop=100*o;let i=(t instanceof MouseEvent?t.clientX:t.touches[0].clientX)-e.left;i<0?i=0:i>l&&(i=l);const a=i/l;this.leftLeft=100*a;const r=1-h/s,n=i/l,c=r/2*(2-n),u=r*n/(1-Math.abs(2*c-1));this.hsl.s=u?Math.round(100*u):0,this.hsl.l=Math.round(100*c),this.hsl.a=1,this.updateModelValue()}leftDown(t){const e=this.refs.left.getBoundingClientRect(),l=e.height-4,h=e.width-4;this.refreshLeftPosition(t,e,l,h),s.modules.pointer.down(t,{move:t=>{this.refreshLeftPosition(t,e,l,h)}})}rightTop=0;refreshRightPosition(t,e,s){let l=(t instanceof MouseEvent?t.clientY:t.touches[0].clientY)-e.top;l<0?l=0:l>s&&(l=s);const h=l/s;this.rightTop=100*h,this.hsl.h=Math.round(360*h),this.updateModelValue()}rightDown(t){const e=this.refs.right.getBoundingClientRect(),l=e.height-4;this.refreshRightPosition(t,e,l),s.modules.pointer.down(t,{move:t=>{this.refreshRightPosition(t,e,l)}})}updateModelValue(){const t={detail:{value:"",hsl:void 0,rgb:void 0}};switch(t.detail.value="",this.props.mode){case"hsl":t.detail.hsl={h:Math.round(this.hsl.h),s:Math.round(this.hsl.s),l:Math.round(this.hsl.l),a:this.hsl.a},t.detail.value=`hsl${1===this.hsl.a?"":"a"}(${t.detail.hsl.h},${t.detail.hsl.s}%,${t.detail.hsl.l}%${1===t.detail.hsl.a?"":","+t.detail.hsl.a})`;break;case"rgb":{const e=s.tool.hsl2rgb(this.hsl.h,this.hsl.s,this.hsl.l,this.hsl.a);t.detail.rgb={r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b),a:e.a},t.detail.value=e.rgb;break}default:{const e=s.tool.hsl2rgb(this.hsl.h,this.hsl.s,this.hsl.l,this.hsl.a),l=s.tool.rgb2hex(e.r,e.g,e.b,e.a);t.detail.value="#"+l}}this.value!==t.detail.value&&(this.color=t.detail.value,this.value=this.color,this.emit("update:modelValue",t.detail.value),this.emit("changed",t))}formatColor(t){if(!t){const t={detail:{value:"",hsl:void 0,rgb:void 0}};return this.color="",this.value="",this.emit("update:modelValue",t.detail.value),void this.emit("changed",t)}const e=t.toLowerCase();if(e.startsWith("hsl")){const t=s.tool.formatColor(e);this.hsl.h=Math.round(t[0]),this.hsl.s=Math.round(t[1]),this.hsl.l=Math.round(t[2]),this.hsl.a=t[3]??1}else if(e.startsWith("rgb")){const t=s.tool.formatColor(e),l=s.tool.rgb2hsl(t[0],t[1],t[2],t[3],!0);this.hsl.h=l.h,this.hsl.s=l.s,this.hsl.l=l.l,this.hsl.a=l.a}else{const t=s.tool.hex2rgb(e),l=s.tool.rgb2hsl(t.r,t.g,t.b,t.a,!0);this.hsl.h=l.h,this.hsl.s=l.s,this.hsl.l=l.l,this.hsl.a=l.a}const l=this.refs.left.getBoundingClientRect(),h=l.height-4,o=l.width-4,i=this.hsl.l+this.hsl.s/100*Math.min(this.hsl.l,100-this.hsl.l),a=0===i?0:2*(1-this.hsl.l/i)*100,r=(1-i/100)*h/h;this.leftTop=100*r;const n=a/100*o/o;this.leftLeft=100*n,this.rightTop=this.hsl.h/360*100,this.updateModelValue()}input(){this.color!==this.value&&this.formatColor(this.color)}onMounted(){this.watch("modelValue",()=>{this.props.modelValue!==this.value&&(this.color=this.props.modelValue,this.value=this.color,this.formatColor(this.value))},{immediate:!0}),this.watch("mode",()=>{this.value&&this.updateModelValue()})}}return l}(clickgo.modules.clickgo);