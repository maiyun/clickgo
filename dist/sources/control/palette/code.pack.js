var emodule=function(t){"use strict";function s(t){var s=Object.create(null);return t&&Object.keys(t).forEach(function(e){if("default"!==e){var l=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(s,e,l.get?l:{enumerable:!0,get:function(){return t[e]}})}}),s.default=t,Object.freeze(s)}var e=s(t);class l extends e.control.AbstractControl{get filename(){return"/code.js"}constructor(){super(...arguments),this.emits={changed:null,ok:null,"update:modelValue":null},this.props={modelValue:"",mode:"hsl",ok:!1},this.hsl={h:0,s:0,l:100,a:1},this.color="",this.value="",this.localeData={en:{clear:"Clear",ok:"OK"},sc:{clear:"清除",ok:"确定"},tc:{clear:"清除",ok:"確定"},ja:{clear:"クリア",ok:"OK"},ko:{clear:"지우기",ok:"확인"},th:{clear:"ล้าง",ok:"ตกลง"},es:{clear:"Claro",ok:"Aceptar"},de:{clear:"Löschen",ok:"OK"},fr:{clear:"Effacer",ok:"Valider"},pt:{clear:"Limpar",ok:"OK"},ru:{clear:"Очистить",ok:"ОК"},vi:{clear:"Xóa",ok:"OK"}},this.leftTop=0,this.leftLeft=0,this.rightTop=0}refreshLeftPosition(t,s,e,l){let h=(t instanceof MouseEvent?t.clientY:t.touches[0].clientY)-s.top;h<0?h=0:h>e&&(h=e);const o=h/e;this.leftTop=100*o;let i=(t instanceof MouseEvent?t.clientX:t.touches[0].clientX)-s.left;i<0?i=0:i>l&&(i=l);const a=i/l;this.leftLeft=100*a;const r=1-h/e,n=i/l,u=r/2*(2-n),c=r*n/(1-Math.abs(2*u-1));this.hsl.s=c?Math.round(100*c):0,this.hsl.l=Math.round(100*u),this.hsl.a=1,this.updateModelValue()}leftDown(t){if(e.dom.hasTouchButMouse(t))return;const s=this.refs.left.getBoundingClientRect(),l=s.height-4,h=s.width-4;this.refreshLeftPosition(t,s,l,h),e.dom.bindDown(t,{move:t=>{this.refreshLeftPosition(t,s,l,h)}})}refreshRightPosition(t,s,e){let l=(t instanceof MouseEvent?t.clientY:t.touches[0].clientY)-s.top;l<0?l=0:l>e&&(l=e);const h=l/e;this.rightTop=100*h,this.hsl.h=Math.round(360*h),this.updateModelValue()}rightDown(t){if(e.dom.hasTouchButMouse(t))return;const s=this.refs.right.getBoundingClientRect(),l=s.height-4;this.refreshRightPosition(t,s,l),e.dom.bindDown(t,{move:t=>{this.refreshRightPosition(t,s,l)}})}updateModelValue(){const t={detail:{value:"",hsl:void 0,rgb:void 0}};switch(t.detail.value="",this.props.mode){case"hsl":t.detail.hsl={h:Math.round(this.hsl.h),s:Math.round(this.hsl.s),l:Math.round(this.hsl.l),a:this.hsl.a},t.detail.value=`hsl${1===this.hsl.a?"":"a"}(${t.detail.hsl.h},${t.detail.hsl.s}%,${t.detail.hsl.l}%${1===t.detail.hsl.a?"":","+t.detail.hsl.a})`;break;case"rgb":{const s=e.tool.hsl2rgb(this.hsl.h,this.hsl.s,this.hsl.l,this.hsl.a);t.detail.rgb={r:Math.round(s.r),g:Math.round(s.g),b:Math.round(s.b),a:s.a},t.detail.value=s.rgb;break}default:{const s=e.tool.hsl2rgb(this.hsl.h,this.hsl.s,this.hsl.l,this.hsl.a),l=e.tool.rgb2hex(s.r,s.g,s.b,s.a);t.detail.value="#"+l}}this.value!==t.detail.value&&(this.color=t.detail.value,this.value=this.color,this.emit("update:modelValue",t.detail.value),this.emit("changed",t))}formatColor(t){if(!t){const t={detail:{value:"",hsl:void 0,rgb:void 0}};return this.color="",this.value="",this.emit("update:modelValue",t.detail.value),void this.emit("changed",t)}const s=t.toLowerCase();if(s.startsWith("hsl")){const t=e.tool.formatColor(s);this.hsl.h=Math.round(t[0]),this.hsl.s=Math.round(t[1]),this.hsl.l=Math.round(t[2]),this.hsl.a=t[3]??1}else if(s.startsWith("rgb")){const t=e.tool.formatColor(s),l=e.tool.rgb2hsl(t[0],t[1],t[2],t[3],!0);this.hsl.h=l.h,this.hsl.s=l.s,this.hsl.l=l.l,this.hsl.a=l.a}else{const t=e.tool.hex2rgb(s),l=e.tool.rgb2hsl(t.r,t.g,t.b,t.a,!0);this.hsl.h=l.h,this.hsl.s=l.s,this.hsl.l=l.l,this.hsl.a=l.a}const l=this.refs.left.getBoundingClientRect(),h=l.height-4,o=l.width-4,i=this.hsl.l+this.hsl.s/100*Math.min(this.hsl.l,100-this.hsl.l),a=0===i?0:2*(1-this.hsl.l/i)*100,r=(1-i/100)*h/h;this.leftTop=100*r;const n=a/100*o/o;this.leftLeft=100*n,this.rightTop=this.hsl.h/360*100,this.updateModelValue()}input(){this.color!==this.value&&this.formatColor(this.color)}onMounted(){this.watch("modelValue",()=>{this.props.modelValue!==this.value&&(this.color=this.props.modelValue,this.value=this.color,this.formatColor(this.value))},{immediate:!0}),this.watch("mode",()=>{this.value&&this.updateModelValue()})}}return l}(clickgo.modules.clickgo);