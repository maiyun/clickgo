var emodule=function(t){"use strict";function e(t){var e=Object.create(null);return t&&Object.keys(t).forEach(function(s){if("default"!==s){var o=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:function(){return t[s]}})}}),e.default=t,Object.freeze(e)}var s=e(t);class o extends s.control.AbstractControl{get filename(){return"/code.js"}emits={layer:null,qs:null,"update:modelValue":null,"update:show":null};props={modelValue:"",default:"",hash:!1,show:void 0,logo:""};showData=!0;logoData="";logoCount=0;selected="";qs={};layer=!1;childs=[];get formHash(){return this.rootForm.formHash}async select(t){if(this.selected===t)return;this.selected=t,this.emit("update:modelValue",t);const e=this.selected.split("?");this.qs=e[1]?Object.fromEntries(e[1].split("&").map(t=>t.split("="))):{},this.emit("qs",s.tool.clone(this.qs)),this.propBoolean("hash")&&this.rootForm.formHash!==this.selected&&(this.rootForm.formHash=this.selected),this.layer&&this.showData&&(this.showData=!1,this.emit("update:show",this.showData)),await this.nextTick();const o=this.refs.flow.element.querySelector("[data-nav-item-selected]");if(!o)return;const i=this.refs.flow.element.getBoundingClientRect(),h=i.top+i.height,a=o.getBoundingClientRect();a.top+a.height>h?this.refs.flow.element.scrollTop=a.top-i.top+this.refs.flow.element.scrollTop-i.height+a.height+10:a.top>=i.top||(this.refs.flow.element.scrollTop-=i.top-a.top+10)}menuwrapClick(t){this.layer&&t.currentTarget===t.target&&this.showData&&(this.showData=!1,this.emit("update:show",this.showData))}async onMounted(){await this.nextTick(),s.dom.watchSize(this,this.element,()=>{this.element.offsetWidth<600?this.layer||(this.layer=!0,this.emit("layer",this.layer)):this.layer&&(this.layer=!1,this.emit("layer",this.layer))},!0),this.watch("show",()=>{if(void 0===this.props.show)return this.showData=!this.layer,void this.emit("update:show",this.showData);this.showData=this.propBoolean("show")},{immediate:!0}),this.watch("modelValue",async()=>{await this.select(this.props.modelValue||this.props.default)}),this.watch("logo",async()=>{const t=++this.logoCount;if("string"!=typeof this.props.logo||""===this.props.logo)return void(this.logoData="");const e=this.props.logo.slice(0,6).toLowerCase();if("file:/"===e)return;if("http:/"===e||"https:"===e||e.startsWith("data:"))return void(this.logoData=`url(${this.props.logo})`);const o=s.tool.urlResolve("/package"+this.path+"/",this.props.logo),i=await s.fs.getContent(this,o);if(t!==this.logoCount||!i||"string"==typeof i)return;const h=await s.tool.blob2DataUrl(i);t===this.logoCount&&(this.logoData=h?"url("+h+")":"")},{immediate:!0}),this.watch("formHash",async()=>{this.propBoolean("hash")&&this.selected!==this.formHash&&await this.select(this.formHash||this.props.default)}),this.watch("hash",()=>{this.propBoolean("hash")&&this.formHash!==this.selected&&(this.rootForm.formHash=this.selected)}),this.propBoolean("hash")?await this.select(this.formHash||this.props.default):await this.select(this.props.modelValue||this.props.default)}}return o}(clickgo.modules.clickgo);