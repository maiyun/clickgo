var emodule=function(s){"use strict";function e(s){var e=Object.create(null);return s&&Object.keys(s).forEach(function(t){if("default"!==t){var i=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:function(){return s[t]}})}}),e.default=s,Object.freeze(e)}var t=e(s);class i extends t.control.AbstractControl{get filename(){return"/code.js"}constructor(){super(...arguments),this.emits={init:null,connect:null,disconnect:null,password:null,fail:null,desktopresize:null,clipboard:null},this.notInit=!1,this.isLoading=!0,this.lastActive=0,this.access={novnc:void 0,rfb:void 0},this.props={modelValue:{url:"",pwd:""}}}async onMounted(){const s=await t.core.getModule("@novnc/novnc");if(!s)return this.isLoading=!1,void(this.notInit=!0);this.access.novnc=s.default.default,this.watch(()=>JSON.stringify(this.props.modelValue),(s,e)=>{if(s!==e&&this.access.novnc){if(!this.props.modelValue?.url){if(!this.access.rfb)return;return this.access.rfb.disconnect(),void(this.access.rfb=void 0)}this.access.rfb=new this.access.novnc(this.refs.content,this.props.modelValue.url,{credentials:{password:t.tool.isTruthy(this.props.modelValue.pwd)?this.props.modelValue.pwd:void 0},viewOnly:this.props.modelValue.view??!1,clipViewport:!1,scaleViewport:!0}),this.access.rfb.addEventListener("connect",()=>{this.lastActive=Date.now(),this.emit("connect",{width:this.access.rfb._fbWidth,height:this.access.rfb._fbHeight})}),this.access.rfb.addEventListener("disconnect",()=>{this.emit("disconnect")}),this.access.rfb.addEventListener("credentialsrequired",()=>{this.emit("password")}),this.access.rfb.addEventListener("securityfailure",()=>{this.emit("fail")}),this.access.rfb.addEventListener("desktopresize",()=>{this.emit("desktopresize",{width:this.access.rfb._fbWidth,height:this.access.rfb._fbHeight})}),this.access.rfb.addEventListener("clipboard",s=>{this.emit("clipboard",s.detail.text)})}},{deep:!0,immediate:!0}),this.isLoading=!1,this.emit("init",this.access.novnc)}onUnmounted(){this.access.rfb&&(this.access.rfb.disconnect(),this.access.rfb=void 0)}mousemove(s){this.access.rfb&&(t.dom.hasTouchButMouse(s)||(this.lastActive=Date.now()))}disconnect(){this.access.rfb&&(this.access.rfb.disconnect(),this.access.rfb=void 0)}sendPassword(s){return!!this.access.rfb&&(this.access.rfb.sendCredentials({password:s}),!0)}sendClipboard(s){return!!this.access.rfb&&(this.access.rfb.clipboardPasteFrom(s),!0)}sendCtrlAltDel(){return!!this.access.rfb&&(this.access.rfb.sendCtrlAltDel(),!0)}}return i}(clickgo.modules.clickgo);