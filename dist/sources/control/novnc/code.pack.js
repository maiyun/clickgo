var emodule=function(e){"use strict";function s(e){var s=Object.create(null);return e&&Object.keys(e).forEach(function(t){if("default"!==t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(s,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})}}),s.default=e,Object.freeze(s)}var t=s(e);class i extends t.control.AbstractControl{get filename(){return"/code.js"}emits={init:null,connect:null,disconnect:null,password:null,fail:null,desktopresize:null,clipboard:null};notInit=!1;isLoading=!0;lastActive=0;access={novnc:void 0,rfb:void 0};props={modelValue:{url:"",pwd:""}};async onMounted(){const e=await t.core.getModule("@novnc/novnc");if(!e)return this.isLoading=!1,void(this.notInit=!0);this.access.novnc=e.default.default,this.watch(()=>JSON.stringify(this.props.modelValue),(e,s)=>{if(e!==s&&this.access.novnc){if(!this.props.modelValue?.url){if(!this.access.rfb)return;return this.access.rfb.disconnect(),void(this.access.rfb=void 0)}this.access.rfb=new this.access.novnc(this.refs.content,this.props.modelValue.url,{credentials:{password:t.tool.isTruthy(this.props.modelValue.pwd)?this.props.modelValue.pwd:void 0},viewOnly:this.props.modelValue.view??!1,clipViewport:!1,scaleViewport:!0}),this.access.rfb.addEventListener("connect",()=>{this.lastActive=Date.now(),this.emit("connect",{width:this.access.rfb._fbWidth,height:this.access.rfb._fbHeight})}),this.access.rfb.addEventListener("disconnect",()=>{this.emit("disconnect")}),this.access.rfb.addEventListener("credentialsrequired",()=>{this.emit("password")}),this.access.rfb.addEventListener("securityfailure",()=>{this.emit("fail")}),this.access.rfb.addEventListener("desktopresize",()=>{this.emit("desktopresize",{width:this.access.rfb._fbWidth,height:this.access.rfb._fbHeight})}),this.access.rfb.addEventListener("clipboard",e=>{this.emit("clipboard",e.detail.text)})}},{deep:!0,immediate:!0}),this.isLoading=!1,this.emit("init",this.access.novnc)}onUnmounted(){this.access.rfb&&(this.access.rfb.disconnect(),this.access.rfb=void 0)}pointermove(){this.access.rfb&&(this.lastActive=Date.now())}disconnect(){this.access.rfb&&(this.access.rfb.disconnect(),this.access.rfb=void 0)}sendPassword(e){return!!this.access.rfb&&(this.access.rfb.sendCredentials({password:e}),!0)}sendClipboard(e){return!!this.access.rfb&&(this.access.rfb.clipboardPasteFrom(e),!0)}sendCtrlAltDel(){return!!this.access.rfb&&(this.access.rfb.sendCtrlAltDel(),!0)}}return i}(clickgo.modules.clickgo);