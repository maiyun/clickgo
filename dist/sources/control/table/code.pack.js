var emodule=function(t){"use strict";function i(t){var i=Object.create(null);return t&&Object.keys(t).forEach(function(e){if("default"!==e){var s=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(i,e,s.get?s:{enumerable:!0,get:function(){return t[e]}})}}),i.default=t,Object.freeze(i)}var e=i(t);class s extends e.control.AbstractControl{get filename(){return"/code.js"}emits={sort:null,select:null,itemclicked:null,gesture:null,"update:modelValue":null};props={disabled:!1,must:!0,multi:!1,ctrl:!0,selection:!1,gesture:[],scroll:"auto",sort:!1,split:!1,virtual:!1,fixed:void 0,map:{},data:[],sizes:{},modelValue:[],mode:"default"};items=[];get itemsLength(){return this.items.length}widthMap=[];minWidthMap=[];scrollLeft=0;scrollWidth=0;clientWidth=0;nowSort={index:-1,sort:"desc"};get maxScrollLeft(){return this.scrollWidth-this.clientWidth}arrowUp(){this.refs.gl.arrowUp()}arrowDown(){this.refs.gl.arrowDown()}setHeaderLabel(t,i){const e=this.items[t];e&&(e.label=i)}setHeaderWidth(t,i){this.widthMap[t]=i}setHeaderMinWidth(t,i){this.minWidthMap[t]=i}setHeaderSort(t,i){const e=this.items[t];e&&(e.sort=i)}updateScrollLeft(t){this.refs.header.scrollLeft=t,this.scrollLeft=t}refreshHeader(){const t=this.slotsAll("default");this.items.length=0,this.widthMap.length=0,this.minWidthMap.length=0;for(const i of t){const t=i.props.width?parseInt(i.props.width):0;this.items.push({label:i.props.label??"",width:t,sort:void 0!==i.props.sort?e.tool.getBoolean(i.props.sort):i.props.sort}),this.widthMap.push(this.propBoolean("split")?t||0:t);const s=i.props.minWidth??i.props["min-width"];this.minWidthMap.push(s?parseInt(s):50)}this.checkNowSort()}checkNowSort(){if(-1===this.nowSort.index)return;for(let t=0;t<this.items.length;++t){if(t!==this.nowSort.index)continue;if(this.items[t].sort??this.propBoolean("sort"))return;break}this.nowSort.index=-1;this.emit("sort",{go:!0,preventDefault:function(){this.go=!1},detail:{index:-1,label:"",sort:"desc"}})}headerClick(t,i){e.modules.pointer.click(t,()=>{const t=this.items[i];if(!(t.sort??this.propBoolean("sort")))return;const e={go:!0,preventDefault:function(){this.go=!1},detail:{index:i,label:t.label,sort:"desc"}};if(this.nowSort.index!==i){if(this.emit("sort",e),!e.go)return;return this.nowSort.index=i,void(this.nowSort.sort="desc")}if("desc"===this.nowSort.sort){if(e.detail.sort="asc",this.emit("sort",e),!e.go)return;return this.nowSort.index=i,void(this.nowSort.sort="asc")}e.detail.index=-1,e.detail.label="",this.emit("sort",e),e.go&&(this.nowSort.index=-1)})}bindResize(t,i){const s=t.currentTarget.parentNode;e.modules.pointer.resize(t,{object:s,border:"r",minWidth:this.minWidthMap[i],move:(t,e,s)=>{this.widthMap[i]=s}})}isFixed={left:void 0,right:void 0};onMounted(){this.watch("sort",()=>{this.checkNowSort()}),this.watch(()=>(this.props.fixed??"")+"|"+this.itemsLength,()=>void 0===this.props.fixed?(this.isFixed.left=void 0,void(this.isFixed.right=void 0)):"both"===this.props.fixed?(this.isFixed.left="left",void(this.isFixed.right="right")):"left"===this.props.fixed?(this.isFixed.left="left",void(this.isFixed.right=void 0)):(this.isFixed.left=void 0,void(this.isFixed.right="right")),{immediate:!0}),this.watch("split",()=>{if(this.refs.header)if(this.props.split);else for(let t=0;t<this.items.length;++t){const i=this.items[t];i.width!==this.widthMap[t]&&(this.widthMap[t]=i.width)}},{immediate:!0})}}return s}(clickgo.modules.clickgo);