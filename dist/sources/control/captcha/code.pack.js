var emodule=function(e){"use strict";function s(e){var s=Object.create(null);return e&&Object.keys(e).forEach(function(t){if("default"!==t){var c=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(s,t,c.get?c:{enumerable:!0,get:function(){return e[t]}})}}),s.default=e,Object.freeze(s)}var t=s(e);class c extends t.control.AbstractControl{get filename(){return"/code.js"}emits={result:null};props={factory:"tc",akey:""};get showMask(){return!!this.isLoading||t.dom.is.move}access={lib:void 0,instance:void 0};notInit=!1;isLoading=!1;state="";localeData={en:{click:"Click to verify",failed:"Failed, retry",successful:"Verified"},sc:{click:"点击进行验证",failed:"失败，点击重试",successful:"验证成功"},tc:{click:"點選進行驗證",failed:"失敗，點選重試",successful:"驗證成功"},ja:{click:"認証する",failed:"失敗、再試行",successful:"成功"},ko:{click:"인증하기",failed:"실패, 재시도",successful:"성공"},th:{click:"ยืนยัน",failed:"ล้มเหลว, ลองอีก",successful:"สำเร็จ"},es:{click:"Verificar",failed:"Error, reintenta",successful:"Verificado"},de:{click:"Prüfen",failed:"Fehler, retry",successful:"Erfolgreich"},fr:{click:"Vérifier",failed:"Échec, réessayer",successful:"Réussi"},pt:{click:"Verificar",failed:"Falha, retry",successful:"Sucesso"},ru:{click:"Проверить",failed:"Ошибка, повтор",successful:"Успешно"},vi:{click:"Xác minh",failed:"Thất bại, thử lại",successful:"Thành công"}};reset(){if("tc"===this.props.factory)return this.state="",void(this.refs.content.innerHTML=this.l("click"));this.access.lib&&this.access.instance&&this.access.lib.reset(this.access.instance)}click(){this.access.instance&&"tc"===this.props.factory&&"successful"!==this.state&&this.access.instance.show()}async onMounted(){if("tc"===this.props.factory){const e=await t.core.getModule("tjcaptcha");if(!e)return this.isLoading=!1,void(this.notInit=!0);this.access.lib=e,this.refs.content.innerHTML=this.l("click");try{const s=new e(this.props.akey,e=>{0!==e.ret||e.errorCode?(this.state="failed",this.refs.content.innerHTML=this.l("failed")):(this.state="successful",this.refs.content.innerHTML=this.l("successful"));const s={detail:{result:0!==e.ret||e.errorCode?0:1,token:e.ticket+"|"+e.randstr}};this.emit("result",s)},{needFeedBack:!1});this.access.instance=s}catch{return}return void(this.isLoading=!1)}const e=await t.core.getModule("turnstile");if(!e)return this.isLoading=!1,void(this.notInit=!0);this.access.lib=e;const s=e.render(this.refs.content,{sitekey:this.props.akey,size:"flexible",callback:e=>{const s={detail:{result:1,token:e}};this.emit("result",s)}});this.access.instance=s,this.isLoading=!1}onUnmounted(){"tc"!==this.props.factory?this.access.lib&&this.access.instance&&this.access.lib.remove(this.access.instance):this.access.instance=void 0}}return c}(clickgo.modules.clickgo);