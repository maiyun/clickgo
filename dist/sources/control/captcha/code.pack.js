var emodule=function(s){"use strict";function e(s){var e=Object.create(null);return s&&Object.keys(s).forEach(function(t){if("default"!==t){var i=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:function(){return s[t]}})}}),e.default=s,Object.freeze(e)}var t=e(s);class i extends t.control.AbstractControl{get filename(){return"/code.js"}constructor(){super(...arguments),this.emits={result:null},this.props={factory:"tc",akey:""},this.access={lib:void 0,instance:void 0},this.notInit=!1,this.isLoading=!1,this.state="",this.localeData={en:{click:"Click to verify",failed:"Failed, retry",successful:"Verified"},sc:{click:"点击进行验证",failed:"失败，点击重试",successful:"验证成功"},tc:{click:"點選進行驗證",failed:"失敗，點選重試",successful:"驗證成功"},ja:{click:"認証する",failed:"失敗、再試行",successful:"成功"},ko:{click:"인증하기",failed:"실패, 재시도",successful:"성공"},th:{click:"ยืนยัน",failed:"ล้มเหลว, ลองอีก",successful:"สำเร็จ"},es:{click:"Verificar",failed:"Error, reintenta",successful:"Verificado"},de:{click:"Prüfen",failed:"Fehler, retry",successful:"Erfolgreich"},fr:{click:"Vérifier",failed:"Échec, réessayer",successful:"Réussi"},pt:{click:"Verificar",failed:"Falha, retry",successful:"Sucesso"},ru:{click:"Проверить",failed:"Ошибка, повтор",successful:"Успешно"},vi:{click:"Xác minh",failed:"Thất bại, thử lại",successful:"Thành công"}}}get showMask(){return!!this.isLoading||t.dom.is.move}reset(){if("tc"===this.props.factory)return this.state="",void(this.refs.content.innerHTML=this.l("click"));this.access.lib&&this.access.instance&&this.access.lib.reset(this.access.instance)}click(){this.access.instance&&this.access.instance.show()}async onMounted(){if("tc"===this.props.factory){const s=await t.core.getModule("tjcaptcha");if(!s)return this.isLoading=!1,void(this.notInit=!0);this.access.lib=s,this.refs.content.innerHTML=this.l("click");try{const e=new s(this.props.akey,s=>{0!==s.ret||s.errorCode?(this.state="failed",this.refs.content.innerHTML=this.l("failed")):(this.state="successful",this.refs.content.innerHTML=this.l("successful"));const e={detail:{result:0!==s.ret||s.errorCode?0:1,token:s.ticket+"|"+s.randstr}};this.emit("result",e)},{needFeedBack:!1});this.access.instance=e}catch{return}return void(this.isLoading=!1)}const s=await t.core.getModule("turnstile");if(!s)return this.isLoading=!1,void(this.notInit=!0);this.access.lib=s;const e=s.render(this.refs.content,{sitekey:this.props.akey,size:"flexible",callback:s=>{const e={detail:{result:1,token:s}};this.emit("result",e)}});this.access.instance=e,this.isLoading=!1}onUnmounted(){"tc"!==this.props.factory?this.access.lib&&this.access.instance&&this.access.lib.remove(this.access.instance):this.access.instance=void 0}}return i}(clickgo.modules.clickgo);