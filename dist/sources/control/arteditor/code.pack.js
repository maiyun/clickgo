var emodule=function(e){"use strict";function t(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(i){if("default"!==i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}}),t.default=e,Object.freeze(t)}var i=t(e);class a extends i.control.AbstractControl{get filename(){return"/code.js"}constructor(){super(...arguments),this.emits={imgselect:null,"update:modelValue":null,"update:preview":null},this.props={disabled:!1,readonly:!1,preview:!1,pre:"",modelValue:[]},this.value=[],this.previewData=!1,this.focusIndex=-1,this.localeData={en:{passage:"Paragraph",image:"Image",select:"Select",write:"Write",preview:"Preview"},sc:{passage:"段落",image:"图像",select:"选择",write:"撰写",preview:"预览"},tc:{passage:"段落",image:"圖像",select:"選擇",write:"撰寫",preview:"預覽"},ja:{passage:"パラグラフ",image:"画像",select:"選択",write:"執筆",preview:"プレビュー"},ko:{passage:"단락",image:"이미지",select:"선택",write:"쓰기",preview:"미리보기"},th:{passage:"ย่อหน้า",image:"รูปภาพ",select:"เลือก",write:"เขียน",preview:"ดูตัวอย่าง"},es:{passage:"Párrafo",image:"Imagen",select:"Seleccionar",write:"Escribir",preview:"Vista previa"},de:{passage:"Absatz",image:"Bild",select:"Auswählen",write:"Schreiben",preview:"Vorschau"},fr:{passage:"Paragraphe",image:"Image",select:"Sélectionner",write:"Écrire",preview:"Aperçu"},pt:{passage:"Parágrafo",image:"Imagem",select:"Selecionar",write:"Escrever",preview:"Pré-visualização"},ru:{passage:"Параграф",image:"Изображение",select:"Выбрать",write:"Написать",preview:"Просмотр"},vi:{passage:"Đoạn văn",image:"Hình ảnh",select:"Chọn",write:"Viết",preview:"Xem trước"}},this.controlIndex=0}get getImgUrl(){return e=>this.props.pre?i.tool.urlResolve(this.props.pre,e):e}controlDown(e,t){this.controlIndex=t}add(e){switch(e){case"passage":this.value.splice(this.controlIndex+1,0,{type:"p",value:"",b:!1,i:!1}),this.emit("update:modelValue",i.tool.clone(this.value));break;case"image":this.value.splice(this.controlIndex+1,0,{type:"img",value:"",desc:"desc"}),this.emit("update:modelValue",i.tool.clone(this.value))}}remove(e){this.value.splice(e,1),this.emit("update:modelValue",i.tool.clone(this.value))}update(e,t,a){this.value[a][e]=t,this.emit("update:modelValue",i.tool.clone(this.value))}updateBool(e){const t=this.value[this.focusIndex];t&&"p"===t.type&&(t[e]=!t[e],this.emit("update:modelValue",i.tool.clone(this.value)))}changePreview(e){e!==(this.previewData?"preview":"write")&&(this.previewData=!this.previewData,this.emit("update:preview",this.previewData))}imgSelect(e){this.focusIndex=e,this.emit("imgselect",t=>{this.update("value",t,e)})}onMounted(){this.watch("modelValue",()=>{let e=this.props.modelValue;if("string"==typeof e)try{if(e===JSON.stringify(this.value))return;return e=JSON.parse(e),Array.isArray(e)?(this.value=e,void this.emit("update:modelValue",i.tool.clone(e))):(this.value=[],void this.emit("update:modelValue",[]))}catch{return this.value=[],void this.emit("update:modelValue",[])}if(Array.isArray(e)){if(JSON.stringify(e)===JSON.stringify(this.value))return;this.value=i.tool.clone(e)}else this.value=[],this.emit("update:modelValue",[])},{deep:!0,immediate:!0}),this.watch("preview",()=>{this.previewData=this.propBoolean("preview")})}}return a}(clickgo.modules.clickgo);