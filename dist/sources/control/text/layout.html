<div class="wrap" :class="[isFocus&&'focus',propBoolean('plain')&&'plain',propBoolean('require')&&!value&&'require',dangerBorder&&'dangerBorder']" :data-cg-disabled="propBoolean('disabled') ? '' : undefined" @pointerdown="down" :style="{'--padding':padding==='0'?'0':`var(--g-padding${padding==='m'?'':('-'+padding)})`}">
    <template v-if="type === 'multi'">
        <div class="multi-t">
            <div v-if="slots['before']" class="before"><slot name="before"></slot></div>
            <div v-if="slots['prepend']" class="prepend"><slot name="prepend"></slot></div>
            <textarea ref="text" class="text" :value="value" :maxlength="propNumber('maxlength') || undefined" :placeholder="placeholder" :readonly="propBoolean('readonly')" :disabled="propBoolean('disabled')" :wrap="propBoolean('wrap') ? undefined : 'off'" @focus="tfocus" @blur="tblur" @input="input" @wheel="wheel" @scroll="scrollEvent" @pointerdown="inputDown" @change="$event.stopPropagation()" @select="select" @keydown="keydown" data-cg-scroll></textarea>
            <div v-if="slots['append']" class="append"><slot name="append"></slot></div>
            <div v-if="slots['after']" class="after"><slot name="after"></slot></div>
            <cg-scroll v-if="propBoolean('scroll')" :length="size.sh" :client="size.ch" :offset="size.st" @update:offset="refs.text.scrollTop=$event"></cg-scroll>
        </div>
        <div v-if="!propBoolean('wrap')" class="multi-b">
            <cg-scroll v-if="propBoolean('scroll')" direction="h" :length="size.sw" :client="size.cw" :offset="size.sl" @update:offset="refs.text.scrollLeft = $event"></cg-scroll>
            <div class="multi-rb"></div>
        </div>
    </template>
    <div v-else class="single">
        <div v-if="slots['before']" class="before"><slot name="before"></slot></div>
        <div v-if="slots['prepend']" class="prepend"><slot name="prepend"></slot></div>
        <input ref="text" class="text" :type="type === 'password' ? (showPassword ? 'text' : 'password') : type" :value="value" :maxlength="propNumber('maxlength') || undefined" :placeholder="placeholder" :readonly="propBoolean('readonly')" :disabled="propBoolean('disabled')" :min="min===undefined?undefined:propNumber('min')" :max="max===undefined?undefined:propNumber('max')" @focus="tfocus" @blur="tblur" @input="input" @wheel="wheel" @scroll="scrollEvent" @pointerdown="inputDown" @change="$event.stopPropagation()" @select="select" @keydown="keydown" data-cg-scroll>
        <div v-if="type === 'number'" class="number">
            <div class="up" @click="numberClick(1)" @pointerdown="udDown" :data-cg-disabled="(max !== undefined && max !== 'undefined' && (value >= propNumber('max'))) ? '' : undefined"></div>
            <div class="down" @click="numberClick(-1)" @pointerdown="udDown" :data-cg-disabled="(min !== undefined && min !== 'undefined' && (value <= propNumber('min'))) ? '' : undefined"></div>
        </div>
        <div v-if="propBoolean('keyboard')" class="sicon" @click="showKeyboard" @pointerdown="kbdown">
            <cg-icon name="keyboard" size="m"></cg-icon>
        </div>
        <div v-if="type === 'password'" class="sicon" @click="showPassword=!showPassword">
            <cg-icon :name="showPassword ? 'eye' : 'eye-slash'" size="m"></cg-icon>
        </div>
        <div v-if="slots['append']" class="append"><slot name="append"></slot></div>
        <div v-if="slots['after']" class="after"><slot name="after"></slot></div>
    </div>
    <teleport to="system">
        <div ref="pop" class="pop">
            <slot>
                <cg-menulist>
                    <cg-menulist-item alt="X" @click="execCmd('cut')" :disabled="propBoolean('readonly') || (propBoolean('password') && !showPassword)">
                        <cg-icon name="cut" size="m"></cg-icon>
                        <cg-label>{{l('cut')}}</cg-label>
                    </cg-menulist-item>
                    <cg-menulist-item alt="C" @click="execCmd('copy')" :disabled="propBoolean('password') && !showPassword">
                        <cg-icon name="copy" size="m"></cg-icon>
                        <cg-label>{{l('copy')}}</cg-label>
                    </cg-menulist-item>
                    <cg-menulist-item alt="V" @click="execCmd('paste')" :disabled="propBoolean('readonly')">
                        <cg-icon name="paste" size="m"></cg-icon>
                        <cg-label>{{l('paste')}}</cg-label>
                    </cg-menulist-item>
                </cg-menulist>
            </slot>
        </div>
    </teleport>
</div>