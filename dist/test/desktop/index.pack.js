import*as n from"../../index.js";const t=document.getElementById("tip");t.innerHTML="Starting system app...";class e extends n.AbstractBoot{async main(){if(!window.location.href.includes("?single")){const e=await n.task.run(this._sysId,"/clickgo/app/task.cga",{permissions:["root"]});if("string"!=typeof e)return void(t.innerHTML=`Star system app failed(${e}).`);t.innerHTML="Starting main app..."}const e=await n.task.run(this._sysId,"/clickgo/app/demo.cga",{notify:!window.location.href.includes("?single")&&void 0,permissions:["native.form"],data:{permissions:["root"]},initProgress:(n,t,e,a)=>{console.log("initProgress",n,t,e,a)},perProgress:n=>{console.log("perProgress",n)}});if("number"==typeof e)return void(t.innerHTML=`Start main app failed(${e.toString()}).`);const a=await n.task.getOriginList(this._sysId),o=await n.fs.getContent(this._sysId,"/clickgo/icon.png");if(o instanceof Blob){const t=await n.tool.blob2DataUrl(o);n.core.config["launcher.list"]=[{name:a[e].app.config.name+"01",icon:t,path:a[e].path},{name:a[e].app.config.name+"02",icon:t,path:a[e].path},{id:"1",name:"folder1",list:[{name:a[e].app.config.name+"11",icon:t,path:a[e].path},{name:a[e].app.config.name+"12",icon:t,path:a[e].path}]},{id:"2",name:"folder2",list:[{name:a[e].app.config.name+"21",icon:t,path:a[e].path}]}]}t.innerHTML="Running...";const i=document.getElementsByTagName("body")[0];n.isNative()&&!n.hasFrame()?(i.style.background="transparent",document.getElementById("spic").style.display="none"):(i.classList.add("loaded"),document.getElementById("spic").style.background="transparent")}onError(n,t,e,a){console.log("boot.onError",a,e);const o=document.getElementById("err");o.style.display="block",o.innerHTML="Error, Task ID: "+n.toString()+", Form ID: "+t.toString()+"<br>"+(e.stack?e.stack.replace(/\n/g,"<br>"):"")}onTaskEnded(n){t.innerHTML="Task("+n.toString()+") ended."}}await n.launcher(new e({debug:!0}));